<story-context id="bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>1</epicId>
    <storyId>US-API-000</storyId>
    <title>Initialize Django Project with Cookiecutter Django</title>
    <status>ready-for-dev</status>
    <generatedAt>2025-11-06</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/stories/us-api-000-initialize-django-project-with-cookiecutter-django.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>development team</asA>
    <iWant>initialize the Django project using Cookiecutter Django template</iWant>
    <soThat>we have a production-ready foundation with best practices and essential tooling configured</soThat>
    <tasks>
      <task id="1" priority="critical">Initialize Cookiecutter Django Project (AC: #1, #2, #3)</task>
      <task id="2" priority="critical">Configure Docker Environment (AC: #4, #5)</task>
      <task id="3" priority="high">Verify Admin and API Access (AC: #6, #7)</task>
      <task id="4" priority="high">Configure Arabic Internationalization (AC: #11-#16)</task>
      <task id="5" priority="medium">Initialize Git Repository and Documentation (AC: #8, #9, #10)</task>
      <task id="6" priority="medium">Testing and Validation</task>
    </tasks>
  </story>

  <acceptanceCriteria>
    <criterion id="1">Run `cookiecutter gh:cookiecutter/cookiecutter-django` with correct prompts specified in architecture document</criterion>
    <criterion id="2">Project structure created with project_slug=quran_backend</criterion>
    <criterion id="3">Docker configuration includes web, PostgreSQL, Redis, Celery services</criterion>
    <criterion id="4">`docker-compose up` builds all containers successfully</criterion>
    <criterion id="5">Database migrations apply without errors</criterion>
    <criterion id="6">Django admin interface accessible at localhost:8000/admin</criterion>
    <criterion id="7">DRF browsable API accessible at localhost:8000/api/</criterion>
    <criterion id="8">Environment variables configured in .env file</criterion>
    <criterion id="9">Git repository initialized with initial commit</criterion>
    <criterion id="10">Development documentation updated with setup instructions</criterion>
    <criterion id="11">Django internationalization (i18n) configured with Arabic (ar) and English (en) languages</criterion>
    <criterion id="12">LANGUAGE_CODE set to 'ar' (Arabic as default)</criterion>
    <criterion id="13">USE_I18N = True and USE_L10N = True in settings</criterion>
    <criterion id="14">LANGUAGES configured with both Arabic and English options</criterion>
    <criterion id="15">LocaleMiddleware included in MIDDLEWARE</criterion>
    <criterion id="16">Admin panel displays in Arabic by default with language switcher available</criterion>
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture Document</title>
        <section>Project Initialization</section>
        <snippet>First implementation story must execute Cookiecutter Django with specific prompts. Django 5.2.8 LTS, Python 3.14, PostgreSQL 16, Redis caching, Celery for async tasks, Docker containerization. Arabic configured as default language with i18n support.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture Document</title>
        <section>Technology Stack Details</section>
        <snippet>Core technologies include Django 5.2.8 LTS, DRF 3.16.1+, PostgreSQL 16, Redis for caching and Celery broker, AWS integration (S3, CloudFront, OpenSearch). Monitoring with Sentry. Complete Python library dependencies listed including versions.</snippet>
      </doc>
      <doc>
        <path>docs/tech-spec-epic-1.md</path>
        <title>Epic 1 Technical Specification</title>
        <section>System Architecture Alignment - ADR-001</section>
        <snippet>Cookiecutter Django foundation provides 40% setup time savings with production-ready Django 5.2.8 LTS. Includes Docker containerization (web, PostgreSQL 16, Redis, Celery worker), DRF 3.16.1+ pre-configured, AWS cloud provider integration.</snippet>
      </doc>
      <doc>
        <path>docs/tech-spec-epic-1.md</path>
        <title>Epic 1 Technical Specification</title>
        <section>System Architecture Alignment - ADR-005</section>
        <snippet>Arabic internationalization with Arabic (ar) as LANGUAGE_CODE default, bilingual support (Arabic/English), Django admin in Arabic with RTL layout, LocaleMiddleware for language switching.</snippet>
      </doc>
      <doc>
        <path>docs/epics.md</path>
        <title>Epic Breakdown</title>
        <section>US-API-000: Initialize Django Project with Cookiecutter Django</section>
        <snippet>Foundational story establishing production-ready Django project. Includes complete acceptance criteria, business rules for project configuration, cookiecutter prompts, and Arabic i18n setup instructions. Must be completed before any other development stories.</snippet>
      </doc>
      <doc>
        <path>docs/PRD.md</path>
        <title>Product Requirements Document</title>
        <section>Product Magic - Respectful Design Philosophy</section>
        <snippet>No disruptive monetization, family-safe environment, cultural sensitivity with multi-language support (20+ translations), offline-first architecture. Arabic language support critical for global Muslim community.</snippet>
      </doc>
    </docs>
    <code>
      <!-- No existing code - this is the foundational story that creates the project structure -->
      <note>This is a greenfield project. No code exists yet. This story creates the initial project foundation.</note>
    </code>
    <dependencies>
      <python>
        <!-- Expected dependencies after Cookiecutter initialization -->
        <package name="Django" version="5.2.8" source="architecture.md" />
        <package name="djangorestframework" version="3.16.1+" source="architecture.md" />
        <package name="djangorestframework-simplejwt" version="5.3.1" source="tech-spec-epic-1.md" />
        <package name="django-environ" version="0.11.2" source="architecture.md" />
        <package name="psycopg2-binary" version="2.9.9" source="architecture.md" />
        <package name="django-redis" version="5.4.0" source="architecture.md" />
        <package name="celery" version="5.3.6" source="architecture.md" />
        <package name="django-storages[s3]" version="1.14.2" source="architecture.md" />
        <package name="boto3" version="1.34.0" source="architecture.md" />
        <package name="sentry-sdk" version="1.40.0" source="architecture.md" />
        <package name="gunicorn" version="21.2.0" source="architecture.md" />
        <package name="pytest-django" version="4.7.0" source="architecture.md" />
        <package name="pytest-cov" version="4.1.0" source="architecture.md" />
      </python>
      <infrastructure>
        <tool name="Docker" purpose="Containerization for dev and prod environments" />
        <tool name="Docker Compose" purpose="Multi-container orchestration (web, db, redis, celery)" />
        <tool name="PostgreSQL" version="16" purpose="Primary relational database" />
        <tool name="Redis" purpose="Caching and Celery message broker" />
      </infrastructure>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint type="architecture">Use Cookiecutter Django template exactly as specified - no deviations from prompt configuration</constraint>
    <constraint type="language">Arabic must be default language (LANGUAGE_CODE='ar') with bilingual support (ar/en)</constraint>
    <constraint type="containerization">All services must run in Docker containers for development consistency</constraint>
    <constraint type="database">PostgreSQL 16 required - no other database systems</constraint>
    <constraint type="python">Python 3.14 required for latest stable features and performance</constraint>
    <constraint type="framework">Django 5.2.8 LTS for long-term support until April 2028</constraint>
    <constraint type="api">Django REST Framework 3.16.1+ must be configured during initialization</constraint>
    <constraint type="async">Celery must be configured for background task processing</constraint>
    <constraint type="cloud">AWS selected as cloud provider for S3, CloudFront, OpenSearch integration</constraint>
    <constraint type="monitoring">Sentry must be configured for error tracking and performance monitoring</constraint>
    <constraint type="localization">LocaleMiddleware must be in MIDDLEWARE after SessionMiddleware</constraint>
    <constraint type="testing">pytest-django framework required for all testing</constraint>
    <constraint type="documentation">README must document complete setup process including i18n configuration</constraint>
  </constraints>

  <interfaces>
    <!-- No existing interfaces - this story creates the foundation -->
    <note>After completion, this story will create foundational interfaces including:
      - Django admin interface at localhost:8000/admin
      - DRF browsable API at localhost:8000/api/
      - Django ORM interfaces for database access
      - Celery task interfaces for async processing
    </note>
  </interfaces>

  <tests>
    <standards>
      Testing with pytest-django framework. Integration testing required for Docker container startup, database migrations, and service connectivity. Manual verification of admin panel (Arabic RTL layout) and DRF browsable API accessibility. All 16 acceptance criteria must be validated.
    </standards>
    <locations>
      <location>tests/ (to be created by Cookiecutter)</location>
      <location>pytest configuration in setup.cfg or pyproject.toml</location>
    </locations>
    <ideas>
      <idea ac="1,2,3">Integration test: Verify Cookiecutter generates expected project structure with correct project_slug and Docker configuration files</idea>
      <idea ac="4,5">Integration test: docker-compose up builds containers, database migrations apply cleanly, all services start without errors</idea>
      <idea ac="6">Manual test: Access http://localhost:8000/admin, verify admin login page displays, check Arabic language and RTL layout</idea>
      <idea ac="7">Manual test: Access http://localhost:8000/api/, verify DRF browsable API interface renders correctly</idea>
      <idea ac="8">Integration test: Verify .env file exists and environment variables load correctly via django-environ</idea>
      <idea ac="9,10">Manual verification: Git repository initialized, initial commit exists, README documents setup process</idea>
      <idea ac="11-16">Integration test: Verify i18n settings (LANGUAGE_CODE, LANGUAGES, USE_I18N, USE_L10N, LocaleMiddleware), locale directory exists, translation files compiled</idea>
      <idea>Smoke test: Database connection via dbshell, Redis connection via Celery worker startup</idea>
      <idea>Smoke test: Run default pytest tests (if any included by Cookiecutter template)</idea>
    </ideas>
  </tests>
</story-context>
